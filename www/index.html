<!DOCTYPE HTML>
<html ng-app="myApp">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--<meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">-->
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/external.css">    
    <script src="js/app.js"></script>
    <script src="js/external/angular-local-storage.min.js"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-touch.js"></script>

    
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCiuCrZw8nS98KH1Nsd_DCqC2MFl0WyfaU">
    </script>
    
    <!-- <script src="http://maps.google.com/maps/api/js?libraries=placeses,visualization,drawing,geometry,places"></script> -->
    <!-- <script src="http://rawgit.com/allenhwkim/angularjs-google-maps/master/build/scripts/ng-map.js"></script> -->

    <!-- Angular Material Dependencies 
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>


     Angular Material Javascript now available via Google CDN; version 0.11.2 used here 
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.11.2/angular-material.min.js"></script>
    -->
    <script type="text/javascript" charset="utf-8">
        
        document.addEventListener("deviceready", function() {
            cordova.plugins.diagnostic.requestRuntimePermissions(function(statuses){
                for (var permission in statuses){
                    switch(statuses[permission]){
                        case cordova.plugins.diagnostic.permissionStatus.GRANTED:
                            console.log("Permission granted to use "+permission);
                            setLocationAcccuracy();
                            break;
                        case cordova.plugins.diagnostic.permissionStatus.NOT_REQUESTED:
                            console.log("Permission to use "+permission+" has not been requested yet");
                            break;
                        case cordova.plugins.diagnostic.permissionStatus.DENIED:
                            console.log("Permission denied to use "+permission+" - ask again?");
                            break;
                        case cordova.plugins.diagnostic.permissionStatus.DENIED_ALWAYS:
                            console.log("Permission permanently denied to use "+permission+" - guess we won't be using it then!");
                            break;
                    }
                }
            }, function(error){
                console.error("The following error occurred: "+error);
            },[
                cordova.plugins.diagnostic.runtimePermission.ACCESS_FINE_LOCATION,
                cordova.plugins.diagnostic.runtimePermission.ACCESS_COARSE_LOCATION
            ]);
            
        }, false);
        
        function setLocationAcccuracy(){
            cordova.plugins.locationAccuracy.request(function (success){
                console.log("Successfully requested accuracy: "+success.message);
            }, function (error){
               console.error("Accuracy request failed: error code="+error.code+"; error message="+error.message);
//               if(error.code !== cordova.plugins.locationAccuracy.ERROR_USER_DISAGREED){
//                   if(window.confirm("Failed to automatically set Location Mode to 'High Accuracy'. Would you like to switch to the Location Settings page and do this manually?")){
//                       cordova.plugins.diagnostic.switchToLocationSettings();
//                   }
//               }
            }, cordova.plugins.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY);
        }

    </script>

</head>

<body ng-controller="IndexCtrl">  
        <ons-tabbar var="MyTabbar">
            <ons-tab
                icon="ion-android-home"
                page="pages/en/home.html"
                active="true"></ons-tab>
            <ons-tab
                icon="ion-android-search"
                page="pages/en/search.html"></ons-tab>
            <ons-tab
                icon="ion-ios-heart"
                page="pages/en/fav.html"></ons-tab>
            <ons-tab
                icon="ion-ios-star"
                page="pages/en/rate.html"></ons-tab>
            <ons-tab
                icon="ion-android-contact"
                page="pages/en/profile.html"></ons-tab>
        </ons-tabbar>
    </ons-navigator>
</body>
</html>
